#! /bin/bash


curl -i -s -k -X $'POST' \
    -H $'Host: 127.0.0.1' -H $'Content-Length: 1881' -H $'Cache-Control: max-age=0' -H $'Upgrade-Insecure-Requests: 1' -H $'Origin: http://127.0.0.1' -H $'Content-Type: application/x-www-form-urlencoded' -H $'User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/100.0.4896.127 Safari/537.36' -H $'Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9' -H $'Referer: http://127.0.0.1/teemip/web/setup/index.php' -H $'Accept-Encoding: gzip, deflate' -H $'Accept-Language: en-US,en;q=0.9' -H $'Connection: close' \
    -b $'itop-99354b5d685b0959957ab887bfc2f00c=b21m2nbbouedvbngnad56vngb1' \
    --data-binary $'choice%5B_0%5D=_1&_class=WizStepModulesChoice&_state=2&_params%5Bmisc_options%5D=%5B%5D&_params%5Bprevious_version_dir%5D=&_params%5Bdb_server%5D=localhost&_params%5Bdb_user%5D=teemipuser&_params%5Bdb_pwd%5D=Gandalfgl%40mdr1ng&_params%5Bdb_name%5D=teemipdb&_params%5Bdb_prefix%5D=tip_&_params%5Bdb_backup%5D=1&_params%5Bdb_backup_path%5D=%2Fvar%2Fwww%2Fhtml%2Fteemip%2Fweb%2Fdata%2FTeemIp-backup-2022-04-27&_params%5Bdb_tls_enabled%5D=&_params%5Bdb_tls_ca%5D=&_params%5Binstall_mode%5D=install&_params%5Bsource_dir%5D=%2Fvar%2Fwww%2Fhtml%2Fteemip%2Fweb%2Fdatamodels%2F2.x%2F&_params%5Bdatamodel_version%5D=2.3.1&_params%5Baccept_license%5D=yes&_params%5Bnew_db_name%5D=&_params%5Bcreate_db%5D=no&_params%5Bdb_new_name%5D=&_params%5Badmin_user%5D=admin&_params%5Badmin_pwd%5D=admin&_params%5Bconfirm_pwd%5D=admin&_params%5Badmin_language%5D=EN+US&_params%5Bdefault_language%5D=EN+US&_params%5Bapplication_url%5D=http%3A%2F%2F192.168.75.141%2Fteemip%2Fweb%2F&_params%5Bgraphviz_path%5D=%2Fusr%2Fbin%2Fdot&_params%5Bsample_data%5D=no&_params%5Badditional_extensions_modules%5D=%5B%5D&_params%5Bselected_components%5D=%5B%7B%22_0%22%3A%22_0%22%2C%22_1%22%3A%22_1%22%2C%22_2%22%3A%22_2%22%2C%22_3%22%3A%22_3%22%2C%22_4%22%3A%22_4%22%2C%22_5%22%3A%22_5%22%7D%2C%7B%22_0%22%3A%22_0%22%7D%5D&_steps=%5B%7B%22class%22%3A%22WizStepWelcome%22%2C%22state%22%3A%22%22%7D%2C%7B%22class%22%3A%22WizStepInstallOrUpgrade%22%2C%22state%22%3A%22%22%7D%2C%7B%22class%22%3A%22WizStepLicense%22%2C%22state%22%3A%22%22%7D%2C%7B%22class%22%3A%22WizStepDBParams%22%2C%22state%22%3A%22%22%7D%2C%7B%22class%22%3A%22WizStepAdminAccount%22%2C%22state%22%3A%22%22%7D%2C%7B%22class%22%3A%22WizStepMiscParams%22%2C%22state%22%3A%22%22%7D%2C%7B%22class%22%3A%22WizStepModulesChoice%22%2C%22state%22%3A%22start_install%22%7D%2C%7B%22class%22%3A%22WizStepModulesChoice%22%2C%22state%22%3A%221%22%7D%5D&operation=next' \
    $'http://127.0.0.1/teemip/web/setup/index.php'

sleep 10

curl -i -s -k -X $'POST' \
    -H $'Host: 127.0.0.1' -H $'Content-Length: 4848' -H $'Cache-Control: max-age=0' -H $'Upgrade-Insecure-Requests: 1' -H $'Origin: http://127.0.0.1' -H $'Content-Type: application/x-www-form-urlencoded' -H $'User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/100.0.4896.127 Safari/537.36' -H $'Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9' -H $'Referer: http://127.0.0.1/teemip/web/setup/index.php' -H $'Accept-Encoding: gzip, deflate' -H $'Accept-Language: en-US,en;q=0.9' -H $'Connection: close' \
    -b $'itop-99354b5d685b0959957ab887bfc2f00c=b21m2nbbouedvbngnad56vngb1' \
    --data-binary $'_class=WizStepSummary&_state=&_params%5Bmisc_options%5D=%5B%5D&_params%5Bprevious_version_dir%5D=&_params%5Bdb_server%5D=localhost&_params%5Bdb_user%5D=teemipuser&_params%5Bdb_pwd%5D=Gandalfgl%40mdr1ng&_params%5Bdb_name%5D=teemipdb&_params%5Bdb_prefix%5D=tip_&_params%5Bdb_backup%5D=1&_params%5Bdb_backup_path%5D=%2Fvar%2Fwww%2Fhtml%2Fteemip%2Fweb%2Fdata%2FTeemIp-backup-2022-04-27&_params%5Bdb_tls_enabled%5D=&_params%5Bdb_tls_ca%5D=&_params%5Binstall_mode%5D=install&_params%5Bsource_dir%5D=%2Fvar%2Fwww%2Fhtml%2Fteemip%2Fweb%2Fdatamodels%2F2.x%2F&_params%5Bdatamodel_version%5D=2.3.1&_params%5Baccept_license%5D=yes&_params%5Bnew_db_name%5D=&_params%5Bcreate_db%5D=no&_params%5Bdb_new_name%5D=&_params%5Badmin_user%5D=admin&_params%5Badmin_pwd%5D=admin&_params%5Bconfirm_pwd%5D=admin&_params%5Badmin_language%5D=EN+US&_params%5Bdefault_language%5D=EN+US&_params%5Bapplication_url%5D=http%3A%2F%2F192.168.75.141%2Fteemip%2Fweb%2F&_params%5Bgraphviz_path%5D=%2Fusr%2Fbin%2Fdot&_params%5Bsample_data%5D=no&_params%5Badditional_extensions_modules%5D=%5B%5D&_params%5Bselected_components%5D=%5B%7B%22_0%22%3A%22_0%22%2C%22_1%22%3A%22_1%22%2C%22_2%22%3A%22_2%22%2C%22_3%22%3A%22_3%22%2C%22_4%22%3A%22_4%22%2C%22_5%22%3A%22_5%22%7D%2C%7B%22_0%22%3A%22_0%22%7D%2C%7B%22_0%22%3A%22_1%22%7D%5D&_params%5Bselected_modules%5D=%5B%22authent-external%22%2C%22authent-ldap%22%2C%22authent-local%22%2C%22itop-backup%22%2C%22itop-config%22%2C%22itop-profiles-itil%22%2C%22itop-tickets%22%2C%22itop-welcome-itil%22%2C%22teemip-welcome%22%2C%22teemip-profiles-itil-adaptor%22%2C%22teemip-webservices%22%2C%22itop-config-mgmt%22%2C%22itop-attachments%22%2C%22itop-datacenter-mgmt%22%2C%22itop-endusers-devices%22%2C%22itop-storage-mgmt%22%2C%22itop-virtualization-mgmt%22%2C%22teemip-network-mgmt%22%2C%22itop-bridge-virtualization-storage%22%2C%22teemip-ip-mgmt%22%2C%22teemip-ipv6-mgmt%22%2C%22teemip-storage-mgmt-adaptor%22%2C%22teemip-virtualization-mgmt-adaptor%22%2C%22teemip-config-mgmt-adaptor%22%2C%22teemip-datacenter-mgmt-adaptor%22%2C%22teemip-endusers-devices-adaptor%22%5D&_params%5Bselected_extensions%5D=%5B%22itop-config-mgmt-core%22%2C%22itop-config-mgmt-datacenter%22%2C%22itop-config-mgmt-end-user%22%2C%22itop-config-mgmt-storage%22%2C%22itop-config-mgmt-virtualization%22%2C%22teemip-network-mgmt%22%2C%22teemip-ip-mgmt-core%22%2C%22teemip-ticket-mgmt-none%22%5D&_params%5Bdisplay_choices%5D=%3Cul%3E%3Cli%3E%3Ci%3EExternal+user+authentication+%28hidden%29%3C%2Fi%3E%3C%2Fli%3E%3Cli%3E%3Ci%3EUser+authentication+based+on+LDAP+%28hidden%29%3C%2Fi%3E%3C%2Fli%3E%3Cli%3E%3Ci%3EUser+authentication+based+on+the+local+DB+%28hidden%29%3C%2Fi%3E%3C%2Fli%3E%3Cli%3E%3Ci%3EBackup+utilities+%28hidden%29%3C%2Fi%3E%3C%2Fli%3E%3Cli%3E%3Ci%3EConfiguration+editor+%28hidden%29%3C%2Fi%3E%3C%2Fli%3E%3Cli%3E%3Ci%3ECreate+standard+ITIL+profiles+%28hidden%29%3C%2Fi%3E%3C%2Fli%3E%3Cli%3E%3Ci%3ETickets+Management+%28hidden%29%3C%2Fi%3E%3C%2Fli%3E%3Cli%3E%3Ci%3EITIL+skin+%28hidden%29%3C%2Fi%3E%3C%2Fli%3E%3Cli%3E%3Ci%3ETeemIp+skin+%28hidden%29%3C%2Fi%3E%3C%2Fli%3E%3Cli%3E%3Ci%3ETeemIp+adaptor+for+iTop+ITIL+Profiles+%28hidden%29%3C%2Fi%3E%3C%2Fli%3E%3Cli%3E%3Ci%3ETeemIp+WEB+Services+%28hidden%29%3C%2Fi%3E%3C%2Fli%3E%3Cli%3EConfiguration+Management+Core%3C%2Fli%3E%3C%2Fli%3E%3Cli%3EData+Center+Devices%3C%2Fli%3E%3C%2Fli%3E%3Cli%3EEnd-User+Devices%3C%2Fli%3E%3C%2Fli%3E%3Cli%3EStorage+Devices%3C%2Fli%3E%3C%2Fli%3E%3Cli%3EVirtualization%3C%2Fli%3E%3C%2Fli%3E%3Cli%3ENetworking%3C%2Fli%3E%3C%2Fli%3E%3Cli%3E%3Cb%3ELinks+between+virtualization+and+storage+%28auto_select%29%3C%2Fb%3E%3C%2Fli%3E%3Cli%3EIPv4+and+IPv6+Management%3C%2Fli%3E%3C%2Fli%3E%3Cli%3E%3Cb%3ETeemIp+adaptor+for+iTop+Storage+Mgmt+%28auto_select%29%3C%2Fb%3E%3C%2Fli%3E%3Cli%3E%3Cb%3ETeemIp+adaptor+for+iTop+Virtualization+Mgmt+%28auto_select%29%3C%2Fb%3E%3C%2Fli%3E%3Cli%3E%3Cb%3ETeemIp+adaptor+for+iTop+Config+Mgmt+%28auto_select%29%3C%2Fb%3E%3C%2Fli%3E%3Cli%3E%3Cb%3ETeemIp+adaptor+for+iTop+Datacenter+Management+%28auto_select%29%3C%2Fb%3E%3C%2Fli%3E%3Cli%3E%3Cb%3ETeemIp+adaptor+for+iTop+End-user+Devices+Management+%28auto_select%29%3C%2Fb%3E%3C%2Fli%3E%3Cli%3ENo+Ticket+Management%3C%2Fli%3E%3C%2Fli%3E%3C%2Ful%3E&_steps=%5B%7B%22class%22%3A%22WizStepWelcome%22%2C%22state%22%3A%22%22%7D%2C%7B%22class%22%3A%22WizStepInstallOrUpgrade%22%2C%22state%22%3A%22%22%7D%2C%7B%22class%22%3A%22WizStepLicense%22%2C%22state%22%3A%22%22%7D%2C%7B%22class%22%3A%22WizStepDBParams%22%2C%22state%22%3A%22%22%7D%2C%7B%22class%22%3A%22WizStepAdminAccount%22%2C%22state%22%3A%22%22%7D%2C%7B%22class%22%3A%22WizStepMiscParams%22%2C%22state%22%3A%22%22%7D%2C%7B%22class%22%3A%22WizStepModulesChoice%22%2C%22state%22%3A%22start_install%22%7D%2C%7B%22class%22%3A%22WizStepModulesChoice%22%2C%22state%22%3A%221%22%7D%2C%7B%22class%22%3A%22WizStepModulesChoice%22%2C%22state%22%3A%222%22%7D%5D&operation=next' \
    $'http://127.0.0.1/teemip/web/setup/index.php'

sleep 10

curl -i -s -k -X $'POST' \
    -H $'Host: 127.0.0.1' -H $'Content-Length: 217' -H $'Accept: */*' -H $'X-Requested-With: XMLHttpRequest' -H $'User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/100.0.4896.127 Safari/537.36' -H $'Content-Type: application/x-www-form-urlencoded; charset=UTF-8' -H $'Origin: http://127.0.0.1' -H $'Referer: http://127.0.0.1/teemip/web/setup/index.php' -H $'Accept-Encoding: gzip, deflate' -H $'Accept-Language: en-US,en;q=0.9' -H $'Connection: close' \
    -b $'itop-99354b5d685b0959957ab887bfc2f00c=b21m2nbbouedvbngnad56vngb1' \
    --data-binary $'operation=async_action&step_class=WizStepDBParams&step_state=&code=check_db&params%5Bdb_server%5D=local&params%5Bdb_user%5D=&params%5Bdb_pwd%5D=&params%5Bdb_name%5D=&params%5Bdb_tls_enabled%5D=0&params%5Bdb_tls_ca%5D=' \
    $'http://127.0.0.1/teemip/web/setup/ajax.dataloader.php'

sleep 10
